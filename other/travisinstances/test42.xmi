<?xml version='1.0' encoding='UTF-8'?>
<devops2:Pipeline xmlns:xmi="http://www.omg.org/XMI" xmlns:devops2="http://www.example.org/devops2" Name="" xmi:version="2.0">
  <tool Name="language: cpp&#10;"/>
  <tool Name="compiler:&#10;- g++&#10;"/>
  <tool Name="notifications:&#10;    email:&#10;        recipients:&#10;        - su2code-dev@lists.stanford.edu&#10;"/>
  <when Trigger="only:&#10;- develop&#10;"/>
  <job Name="env">
    <command Name="">
      <tool Name="global"/>
      <parameter Parameter="CXXFLAGS=-O3 BUILD_DIR=$TRAVIS_BUILD_DIR/SU2"/>
    </command>
    <command Name="" depends="//@job.0/@command.0">
      <tool Name="matrix"/>
      <parameter Parameter="- CONFIGURE_COMMAND=&quot;./configure --prefix=$BUILD_DIR --enable-PY_WRAPPER&quot; TEST_SCRIPT=serial_regression.py&#10;- CONFIGURE_COMMAND=&quot;./configure --enable-mpi --with-cc=mpicc --with-cxx=mpicxx --prefix=$BUILD_DIR&#10;    --enable-PY_WRAPPER&quot; TEST_SCRIPT=parallel_regression.py&#10;"/>
    </command>
  </job>
  <job Name="before_install">
    <command Name="">
      <tool Name="sudo apt-get update -qq"/>
    </command>
    <command Name="" depends="//@job.1/@command.0">
      <tool Name="sudo apt-get install -qq python-numpy python-scipy python-pip mpich2 swig"/>
    </command>
    <command Name="" depends="//@job.1/@command.1">
      <tool Name="mkdir TestData"/>
    </command>
    <command Name="" depends="//@job.1/@command.2">
      <tool Name="shopt -s extglob"/>
    </command>
    <command Name="" depends="//@job.1/@command.3">
      <tool Name="mv -- !(TestData) TestData"/>
    </command>
    <command Name="" depends="//@job.1/@command.4">
      <tool Name="git clone https://github.com/su2code/SU2.git"/>
    </command>
    <command Name="" depends="//@job.1/@command.5">
      <tool Name="cd SU2"/>
    </command>
    <command Name="" depends="//@job.1/@command.6">
      <tool Name="git checkout develop"/>
    </command>
  </job>
  <job Name="install">
    <command Name="">
      <tool Name="sudo pip install mpi4py"/>
    </command>
    <command Name="" depends="//@job.2/@command.0">
      <tool Name="echo $BUILD_DIR"/>
    </command>
    <command Name="" depends="//@job.2/@command.1">
      <tool Name="echo $CONFIGURE_COMMAND"/>
    </command>
    <command Name="" depends="//@job.2/@command.2">
      <tool Name="$CONFIGURE_COMMAND"/>
    </command>
    <command Name="" depends="//@job.2/@command.3">
      <tool Name="make -j 4"/>
    </command>
    <command Name="" depends="//@job.2/@command.4">
      <tool Name="make install"/>
    </command>
    <command Name="" depends="//@job.2/@command.5">
      <tool Name="export SU2_RUN=$BUILD_DIR/bin"/>
    </command>
    <command Name="" depends="//@job.2/@command.6">
      <tool Name="export SU2_HOME=$BUILD_DIR"/>
    </command>
    <command Name="" depends="//@job.2/@command.7">
      <tool Name="export PATH=$PATH:$SU2_RUN"/>
    </command>
    <command Name="" depends="//@job.2/@command.8">
      <tool Name="export PYTHONPATH=$PYTHONPATH:$SU2_RUN"/>
    </command>
  </job>
  <job Name="before_script">
    <command Name="">
      <tool Name="cp -R ../TestData/* ./TestCases/"/>
    </command>
    <command Name="" depends="//@job.3/@command.0">
      <tool Name="cd TestCases/"/>
    </command>
  </job>
  <job Name="script"/>
  <environment Key="global" Value="global"/>
  <environment Key="matrix" Value="matrix"/>
</devops2:Pipeline>
